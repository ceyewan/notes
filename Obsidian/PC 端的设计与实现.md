我正在参与基于后量子密码的全链路安全电子护照认证系统部分设计，主要负责的是 PC 端的验证终端。PC端验证终端通过与护照阅读机中内置的安全芯片进行通信，实现护照信息和认证结果的显示。验证终端采用PC/SC标准库与自定义的APDU指令集进行交互，确保与安全芯片的高效通信。PC端会通过轮询方式向安全芯片发送查询指令，确认是否有护照正在处理。如果有，验证终端显示进度条，并定期发送查询指令，监控认证进度。

一旦认证过程完成，安全芯片将护照信息和认证结果通过APDU指令返回给PC，验证终端展示相应的结果或错误警告。验证终端的界面流转包括：首页 -> 加载页 -> 结果页 -> 首页，模拟了类似火车站验票系统的工作流程，用户能够清晰地看到认证进度并获得反馈。

验证终端是基于Electron框架构建的应用程序，前端使用Vue框架开发现代化、用户友好的界面。后端则采用Go语言与PC/SC标准库进行APDU通信，通过WebSocket接口与前端交互，作为消息的中转使得前端能够无缝获取并展示从安全芯片传递来的数据。以上技术选型也可以保证验证终端跨平台运行，从而适配不同的护照阅读机系统。

即安全芯片与 Go 程序通过 APDU 交互，Go 程序与前端页面通过 WebSocket 交互。

## 1 大纲

### 1.1 第六章 PC验证终端的设计与实现

**第一部分：系统设计**

1. **概述**
    - 介绍验证终端的目的与功能
    - 设计的目标与挑战
2. **整体系统架构设计**
    - 总体架构设计和图纸
    - 基于Electron的跨平台桌面应用架构
    - 前后端分离设计模式（Vue前端 + Go后端进程）
    - 通信模块设计，Go程序与前端通过WebSocket通信，与安全芯片通过 APDU 通信
3. **功能模块设计**
    - **用户界面设计**：界面流转：首页 -> 加载页 -> 结果页（正确/错误） -> 返回首页
    - **APDU 协议设计**：指令集设计与通信流程设计
    - **通信模块设计**：Go服务与前端WebSocket通信协议；Go 服务与安全芯片 APDU 通信

**第二部分：系统实现**

1. **技术栈选择与框架**
    - Electron框架与Vue.js前端
    - Go语言与PC/SC标准库
    - WebSocket用于前后端通信
2. **功能实现**
    - 安全芯片与Go程序的APDU通信实现
    - WebSocket通信的实现与消息传递
    - 前端界面开发
    - Go 语言后端开发

## 2 第一部分：系统设计

PC验证终端作为全链路安全电子护照认证系统的关键组成部分，承担着与护照阅读机中内置安全芯片进行通信、处理护照信息以及展示认证结果的核心任务。其设计旨在为用户提供一个高效、安全且直观的护照认证体验，同时确保与安全芯片的通信符合国际标准，并能够适应多样化的硬件环境。

验证终端的主要功能包括：通过PC/SC标准库与安全芯片进行APDU指令交互，实时监控护照认证进度，并将认证结果通过用户界面反馈给用户。其设计目标在于实现高可靠性、跨平台兼容性以及用户友好的交互体验。然而，在设计过程中也面临诸多挑战，例如如何确保与不同厂商的安全芯片兼容、如何优化通信效率以缩短认证时间，以及如何在保证安全性的前提下提供流畅的用户界面流转。

### 2.1 整体系统架构设计

#### 2.1.1 总体
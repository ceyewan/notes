第一个项目是我最近做的一个分布式的微服务即时通讯系统，支持高并发、低延迟和高可用性。

首先，这个系统采用了四层架构，分别是 API 接入层、逻辑处理层、任务调度层和长连接层，不同层次分别处理不同的内容，层级之间使用 etcd 来进行服务发现，使用 gRPC 和消息队列进行通信。

API 接入层是使用 GIN 框架和 JWT 构建的一个轻量级 Web 服务，为用户提供注册、登录、登出、权限验证等 HTTP 服务，接收到请求后，该层并不直接处理业务逻辑，而是将请求通过 RPC 调用转发给逻辑处理层。

逻辑处理层对外提供 RPC 服务，内部主要负责接收 API 接入层的用户登录、认证请求。此外，还需要出来来自长连接层的消息推送、状态变更。对于一条消息推送，逻辑处理层会将其处理后，为每一个消息通过分布式 ID 算法提交一个唯一的 ID，将其发送到消息队列中。此外，长连接层监控到有用户的上线和下线时，会将上线下线消息和对应的房间号发送到逻辑处理层，逻辑处理层使用 Redis 作为缓存，维护每一个房间的在线人数
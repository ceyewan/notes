设计模式是软件开发中解决常见问题的可重用解决方案，通常根据其目的和使用场景被分为三大类：**创建型模式**（Creational Patterns）、**结构型模式**（Structural Patterns）和**行为型模式**（Behavioral Patterns）。

![image.png](https://ceyewan.oss-cn-beijing.aliyuncs.com/typora/20250314235628.png)

## 1 创建型模式

创建型模式关注对象的**创建机制**，试图以一种适合特定情况的方式创建对象，以提高灵活性和代码复用性。

### 1.1 单例模式

- **描述**：确保一个类**只有一个实例**，并提供一个全局访问点。
- **典型场景**：日志记录器（Logger）。在应用程序中，通常只需要一个日志实例来记录所有操作，避免重复创建和资源浪费。
- **示例**：一个日志类 Logger，通过静态方法 getInstance() 获取唯一实例，所有模块共享该实例记录日志。

### 1.2 工厂方法模式（Factory Method）

- **描述**：定义一个创建对象的接口，但让子类决定实例化哪个类。
- **典型场景**：跨平台 UI 组件创建。比如一个应用程序需要在 Windows 和 Mac 上创建按钮，工厂方法可以根据平台动态生成对应的按钮对象。
- **示例**：ButtonFactory 接口定义 createButton() 方法，WindowsButtonFactory 和 MacButtonFactory 分别实现具体按钮。

### 1.3 抽象工厂模式（Abstract Factory）

- **描述**：提供一个接口，用于创建一系列相关或依赖的对象，而无需指定具体类。
- **典型场景**：主题化的 UI 工具包。假设一个应用支持 " 暗黑 " 和 " 明亮 " 两种主题，抽象工厂可以一次性创建匹配主题的按钮、文本框等组件。
- **示例**：ThemeFactory 接口生成 DarkThemeButton 或 LightThemeButton。

### 1.4 建造者模式（Builder）

- **描述**：将复杂对象的构建过程与其表示分离，逐步构建对象。
- **典型场景**：构造复杂的订单对象。订单可能包含商品、地址、支付方式等多个部分，使用建造者模式可以逐步配置。
- **示例**：OrderBuilder 类通过链式调用设置 addItem()、setAddress() 等，最后调用 build() 生成订单。

### 1.5 原型模式（Prototype）

- **描述**：通过复制现有对象来创建新对象，通常用于创建成本较高的对象。
- **典型场景**：游戏中的敌人生成。假设一个敌人对象初始化需要大量计算，可以通过克隆已有敌人实例来快速生成新敌人。
- **示例**：Enemy 类实现 clone() 方法，复制自身属性生成新实例。

## 2 结构型模式

结构型模式关注类和对象的组合，以形成更大的结构，同时保持系统的灵活性和高效性。

### 2.1 适配器模式（Adapter）

- **描述**：将一个类的接口转换为客户端期望的另一个接口，使不兼容的类能够协同工作。
- **典型场景**：将旧系统的数据格式适配到新系统。比如旧系统返回 XML 数据，新系统需要 JSON，使用适配器转换格式。
- **示例**：XMLToJSONAdapter 类接收 XML 数据并输出 JSON。

### 2.2 装饰器模式（Decorator）

- **描述**：动态地为对象添加职责，而不修改其代码。
- **典型场景**：咖啡店订单系统。基础咖啡可以动态添加糖、奶等装饰，每种装饰增加额外功能和价格。
- **示例**：Coffee 接口，SimpleCoffee 是基础类，MilkDecorator 和 SugarDecorator 动态扩展功能。

### 2.3 代理模式（Proxy）

- **描述**：为另一个对象提供一个替身或占位符，以控制对其访问。
- **典型场景**：图片懒加载。代理对象在图片未加载完成时显示占位符，加载完成后才显示真实图片。
- **示例**：ImageProxy 类在首次访问时加载真实图片 RealImage。

### 2.4 组合模式（Composite）
- **描述**：将对象组合成树形结构，以统一处理单个对象和组合对象。
- **典型场景**：文件系统。文件夹和文件都可以看作节点，文件夹可以包含文件或子文件夹。
- **示例**：FileComponent 接口，File 是叶子节点，Folder 是组合节点。

### 2.5 外观模式（Facade）
- **描述**：为子系统提供一个简化的接口，隐藏复杂性。
- **典型场景**：家庭影院系统。用户只需调用 " 播放电影 " 接口，而无需手动打开电视、音响、播放器等。
- **示例**：HomeTheaterFacade 类封装所有设备的操作，提供 watchMovie() 方法。

## 3 行为型模式（Behavioral Patterns）

行为型模式关注对象之间的通信和职责分配，以实现更灵活的交互。

### 3.1 观察者模式（Observer）
- **描述**：定义对象间一对多的依赖关系，当一个对象状态改变时，所有依赖它的对象都会收到通知。
- **典型场景**：新闻订阅。用户订阅新闻频道，当有新文章发布时，所有订阅者收到更新。
- **示例**：NewsAgency 是主题，Subscriber 是观察者，调用 notify() 推送更新。

### 3.2 策略模式（Strategy）
- **描述**：定义一系列算法，封装每个算法，并使它们可以互换。
- **典型场景**：支付系统。支持信用卡、PayPal、微信支付等多种方式，用户可动态选择支付策略。
- **示例**：PaymentStrategy 接口，CreditCardPayment 和 PayPalPayment 是具体策略。

### 3.3 命令模式（Command）
- **描述**：将请求封装成对象，从而支持撤销、队列等操作。
- **典型场景**：文本编辑器。支持 " 撤销 " 和 " 重做 " 功能，将每次编辑操作封装为命令。
- **示例**：TextEditor 调用 CopyCommand 或 PasteCommand，并支持 undo()。

### 3.4 状态模式（State）
- **描述**：允许对象在内部状态改变时改变其行为。
- **典型场景**：订单状态管理。订单可以是 " 待支付 "" 已支付 "" 已发货 " 等状态，每种状态有不同行为。
- **示例**：Order 类根据 State（如 PendingState、ShippedState）执行不同逻辑。

### 3.5 **责任链模式（Chain Of Responsibility）**
- **描述**：将请求沿处理者链传递，直到某个处理者处理它。
- **典型场景**：请假审批。员工请假请求依次经过组长、经理、总监审批。
- **示例**：LeaveRequest 沿着 TeamLeader -> Manager -> Director 传递。
